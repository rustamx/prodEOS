<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>b9a05505-9536-4250-bafd-0e90ce7a3c5e    </Ид>
	<Наименование>ДО КОРП 2.1 --&gt; УХ 1.3</Наименование>
	<ДатаВремяСоздания>2017-09-12T14:48:25</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.1.11" СинонимКонфигурации="Документооборот 8, редакция  2.1">Документооборот21</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.3.8" СинонимКонфигурации="Управление холдингом, редакция 1.3">УправлениеХолдингом</Приемник>
	<ПослеПолученияИнформацииОбУзлахОбмена>// дополним табличные части узла новыми видами документов, если необходимо, и проверим,
// не следует ли пока прервать обмен до заполнения обязательных реквизитов
УзелОбъект = УзелОбменаЗагрузкаДанных.ПолучитьОбъект();
НужноЗаписатьУзел = Ложь;

// заявки на операции
ТаблицаВидовДокументов = Параметры.ЗаявкиНаОперации.Получить();
ТабличнаяЧасть = УзелОбъект.ЗаявкиНаОперации;
Если ТипЗнч(ТаблицаВидовДокументов) = Тип("ТаблицаЗначений") Тогда
	// дополним новыми
	Для каждого СтрокаТаблицы из ТаблицаВидовДокументов Цикл
		СтрокаТабличнойЧасти = ТабличнаяЧасть.Найти(СтрокаТаблицы.ВидДокумента_Ключ);
		Если СтрокаТабличнойЧасти = Неопределено Тогда
			СтрокаТабличнойЧасти = ТабличнаяЧасть.Добавить();
			СтрокаТабличнойЧасти.ВидДокумента_Ключ = СтрокаТаблицы.ВидДокумента_Ключ;
			НужноЗаписатьУзел = Истина;
		ИначеЕсли СтрокаТабличнойЧасти.ВидДокумента &lt;&gt; СтрокаТаблицы.ВидДокумента Тогда
			НужноЗаписатьУзел = Истина;
		КонецЕсли;
		СтрокаТабличнойЧасти.ВидДокумента = СтрокаТаблицы.ВидДокумента;
	КонецЦикла;
	// удалим лишнее
	НомерСтроки = 0;
	Пока НомерСтроки &lt;= ТабличнаяЧасть.Количество() - 1 Цикл
		СтрокаТаблицы = ТаблицаВидовДокументов.Найти(ТабличнаяЧасть[НомерСтроки].ВидДокумента_Ключ);
		Если СтрокаТаблицы = Неопределено Тогда
			ТабличнаяЧасть.Удалить(НомерСтроки);
			НужноЗаписатьУзел = Истина;
		Иначе
			НомерСтроки = НомерСтроки + 1;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;
Параметры.Вставить("ЗаявкиНаОперации", ТабличнаяЧасть.Выгрузить());

// договоры
ТаблицаВидовДокументов = Параметры.Договоры.Получить();
ТабличнаяЧасть = УзелОбъект.Договоры;
Если ТипЗнч(ТаблицаВидовДокументов) = Тип("ТаблицаЗначений") Тогда
	// дополним новыми
	Для каждого СтрокаТаблицы из ТаблицаВидовДокументов Цикл
		СтрокаТабличнойЧасти = ТабличнаяЧасть.Найти(СтрокаТаблицы.ВидДокумента_Ключ);
		Если СтрокаТабличнойЧасти = Неопределено Тогда
			СтрокаТабличнойЧасти = ТабличнаяЧасть.Добавить();
			СтрокаТабличнойЧасти.ВидДокумента_Ключ = СтрокаТаблицы.ВидДокумента_Ключ;
			СтрокаТабличнойЧасти.НеВыбраныЗначенияОбязательныхРеквизитов = Истина;
			НужноЗаписатьУзел = Истина;
		ИначеЕсли СтрокаТабличнойЧасти.ВидДокумента &lt;&gt; СтрокаТаблицы.ВидДокумента Тогда
			НужноЗаписатьУзел = Истина;
		КонецЕсли;
		СтрокаТабличнойЧасти.ВидДокумента = СтрокаТаблицы.ВидДокумента;
	КонецЦикла;
	// удалим лишнее
	НомерСтроки = 0;
	Пока НомерСтроки &lt;= ТабличнаяЧасть.Количество() - 1 Цикл
		СтрокаТаблицы = ТаблицаВидовДокументов.Найти(ТабличнаяЧасть[НомерСтроки].ВидДокумента_Ключ);
		Если СтрокаТаблицы = Неопределено Тогда
			ТабличнаяЧасть.Удалить(НомерСтроки);
			НужноЗаписатьУзел = Истина;
		Иначе
			НомерСтроки = НомерСтроки + 1;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;
Параметры.Вставить("Договоры", ТабличнаяЧасть.Выгрузить());

Если НужноЗаписатьУзел Тогда
	УзелОбъект.Записать();
КонецЕсли;

// возможно, на этом сеанс обмена следует прервать
СтруктураПоиска = Новый Структура("НеВыбраныЗначенияОбязательныхРеквизитов", Истина);
НайденныеСтроки =  УзелОбъект.Договоры.НайтиСтроки(СтруктураПоиска);
Если НайденныеСтроки.Количество() &lt;&gt; 0 Тогда
	ТекстИсключения = "Не выбраны обязательные реквизиты в правилах загрузки договоров: ";
	Разделитель = "";
	Для каждого НайденнаяСтрока из НайденныеСтроки Цикл
		ТекстИсключения = ТекстИсключения + Разделитель + НайденнаяСтрока.ВидДокумента;
		Разделитель = "; ";
	КонецЦикла;
	ТекстИсключения = ТекстИсключения + ". Загрузка отменена";
	ВызватьИсключение ТекстИсключения;
КонецЕсли;</ПослеПолученияИнформацииОбУзлахОбмена>
	<ПередВыгрузкойДанных>// перенесем в параметры настройки отбора выгружаемых данных
Параметры.Вставить("ОграничиватьВыгрузкуОрганизациями", УзелДляОбмена.ОграничиватьВыгрузкуОрганизациями);
Параметры.Вставить("Организации", УзелДляОбмена.Организации.ВыгрузитьКолонку("Организация"));
Если УзелДляОбмена.ВыгружатьДоговоры Тогда
	Параметры.Вставить("ВидыДокументовДоговор", УзелДляОбмена.Договоры.ВыгрузитьКолонку("ВидДокумента"));
Иначе
	Параметры.Вставить("ВидыДокументовДоговор", Новый Массив);
КонецЕсли;
Если УзелДляОбмена.ВыгружатьЗаявкиНаОперации Тогда
	Параметры.Вставить("ВидыДокументовЗаявкаНаОперацию", УзелДляОбмена.ЗаявкиНаОперации.ВыгрузитьКолонку("ВидДокумента"));
	Параметры.Вставить("ТипыОперацияЗаявкаНаОперацию", УзелДляОбмена.ЗаявкиНаОперации.ВыгрузитьКолонку("ТипОперации"));
Иначе
	Параметры.Вставить("ВидыДокументовЗаявкаНаОперацию", Новый Массив);
	Параметры.Вставить("ТипыОперацияЗаявкаНаОперацию", Новый Массив);
КонецЕсли;
Параметры.Вставить("ВыгружатьПроектыИПроектныеЗадачи", УзелДляОбмена.ВыгружатьПроектыИПроектныеЗадачи);

// перенесем выгружаемые виды документов для обновления ТЧ узла плана обмена на стороне БП

// заявки на операции
ТаблицаВидовДокументов = Новый ТаблицаЗначений;
ТаблицаВидовДокументов.Колонки.Добавить("ВидДокумента");
ТаблицаВидовДокументов.Колонки.Добавить("ВидДокумента_Ключ");
ТаблицаВидовДокументов.Колонки.Добавить("ТипОперации");
Для каждого СтрокаТабличнойЧасти из УзелДляОбмена.ЗаявкиНаОперации Цикл
	СтрокаВидаДокумента = ТаблицаВидовДокументов.Добавить();
	СтрокаВидаДокумента.ВидДокумента = Строка(СтрокаТабличнойЧасти.ВидДокумента);
	СтрокаВидаДокумента.ВидДокумента_Ключ = ЗначениеВСтрокуВнутр(СтрокаТабличнойЧасти.ВидДокумента);
	СтрокаВидаДокумента.ТипОперации = СтрокаТабличнойЧасти.ТипОперации;
КонецЦикла;
НовыйПараметр = ТаблицаНастройкиПараметров.Добавить();
НовыйПараметр.Имя = "ЗаявкиНаОперации";
НовыйПараметр.Значение = Новый ХранилищеЗначения(ТаблицаВидовДокументов);
НовыйПараметр.ПередаватьПараметрПриВыгрузке = Истина;

// договоры
ТаблицаВидовДокументов = Новый ТаблицаЗначений;
ТаблицаВидовДокументов.Колонки.Добавить("ВидДокумента");
ТаблицаВидовДокументов.Колонки.Добавить("ВидДокумента_Ключ");
Для каждого СтрокаТабличнойЧасти из УзелДляОбмена.Договоры Цикл
	СтрокаВидаДокумента = ТаблицаВидовДокументов.Добавить();
	СтрокаВидаДокумента.ВидДокумента = Строка(СтрокаТабличнойЧасти.ВидДокумента);
	СтрокаВидаДокумента.ВидДокумента_Ключ = ЗначениеВСтрокуВнутр(СтрокаТабличнойЧасти.ВидДокумента);
КонецЦикла;
НовыйПараметр = ТаблицаНастройкиПараметров.Добавить();
НовыйПараметр.Имя = "Договоры";
НовыйПараметр.Значение = Новый ХранилищеЗначения(ТаблицаВидовДокументов);
НовыйПараметр.ПередаватьПараметрПриВыгрузке = Истина;</ПередВыгрузкойДанных>
	<ПриПолученииИнформацииОбУдалении>МетаданныеОбъекта = Объект.Метаданные();
Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
	Отказ  = Истина;
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Справочник");
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Группа>
				<Код>Вспомогательные</Код>
				<Наименование>Вспомогательные</Наименование>
				<Порядок>50</Порядок>
				<Правило>
					<Код>Валюты</Код>
					<Наименование>Справочник: Валюты</Наименование>
					<Порядок>50</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.Валюты</Источник>
					<Приемник>СправочникСсылка.Валюты</Приемник>
					<Свойства>
						<Свойство>
							<Код>1</Код>
							<Наименование>ЗагружаетсяИзИнтернета --&gt; ЗагружаетсяИзИнтернета</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЗагружаетсяИзИнтернета" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ЗагружаетсяИзИнтернета" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Наценка --&gt; Наценка</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наценка" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Наценка" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ОсновнаяВалюта --&gt; ОсновнаяВалюта</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ОсновнаяВалюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ОсновнаяВалюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПараметрыПрописиНаРусском --&gt; ПараметрыПрописиНаРусском</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПараметрыПрописиНаРусском" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ПараметрыПрописиНаРусском" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>СпособУстановкиКурса --&gt; СпособУстановкиКурса</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СпособУстановкиКурса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыУстановкиКурсаВалюты"/>
							<Приемник Имя="СпособУстановкиКурса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыУстановкиКурсаВалюты"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ФормулаРасчетаКурса --&gt; ФормулаРасчетаКурса</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ФормулаРасчетаКурса" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ФормулаРасчетаКурса" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВидыКонтактнойИнформации</Код>
					<Наименование>Справочник: Виды контактной информации</Наименование>
					<Порядок>100</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
					<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
					<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>2</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения>
						<Значение>
							<Код>1</Код>
							<Наименование>EmailКонтактногоЛица --&gt; EmailКонтактныеЛица</Наименование>
							<Порядок>50</Порядок>
							<Источник>EmailКонтактногоЛица</Источник>
							<Приемник>EmailКонтактныеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>2</Код>
							<Наименование>EmailКорреспондента --&gt; EmailКонтрагенты</Наименование>
							<Порядок>100</Порядок>
							<Источник>EmailКонтрагента</Источник>
							<Приемник>EmailКонтрагенты</Приемник>
						</Значение>
						<Значение>
							<Код>3</Код>
							<Наименование>EmailОрганизации --&gt; EmailОрганизации</Наименование>
							<Порядок>150</Порядок>
							<Источник>EmailОрганизации</Источник>
							<Приемник>EmailОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>4</Код>
							<Наименование>EmailПользователя --&gt; EmailПользователя</Наименование>
							<Порядок>200</Порядок>
							<Источник>EmailПользователя</Источник>
							<Приемник>EmailПользователя</Приемник>
						</Значение>
						<Значение>
							<Код>5</Код>
							<Наименование>ДомашнийАдресФизическогоЛица --&gt; АдресДляИнформиро</Наименование>
							<Порядок>250</Порядок>
							<Источник>ДомашнийАдресФизическогоЛица</Источник>
							<Приемник>АдресДляИнформированияФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>6</Код>
							<Наименование>ДомашнийТелефонФизическогоЛица --&gt; ТелефонДомашний</Наименование>
							<Порядок>300</Порядок>
							<Источник>ДомашнийТелефонФизическогоЛица</Источник>
							<Приемник>ТелефонДомашнийФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>7</Код>
							<Наименование>ДругаяИнформацияОрганизации --&gt; ДругаяИнформацияОр</Наименование>
							<Порядок>350</Порядок>
							<Источник>ДругаяИнформацияОрганизации</Источник>
							<Приемник>ДругаяИнформацияОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>8</Код>
							<Наименование>МобильныйТелефонКонтактногоЛица --&gt; ТелефонМобильн</Наименование>
							<Порядок>400</Порядок>
							<Источник>МобильныйТелефонКонтактногоЛица</Источник>
							<Приемник>ТелефонМобильныйКонтактныеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>9</Код>
							<Наименование>МобильныйТелефонФизическогоЛица --&gt; ТелефонДомашни</Наименование>
							<Порядок>450</Порядок>
							<Источник>МобильныйТелефонФизическогоЛица</Источник>
							<Приемник>ТелефонДомашнийФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>10</Код>
							<Наименование>ПочтовыйАдресКорреспондента --&gt; ФактАдресКонтраген</Наименование>
							<Порядок>500</Порядок>
							<Источник>ФактическийАдресКонтрагента</Источник>
							<Приемник>ФактАдресКонтрагента</Приемник>
						</Значение>
						<Значение>
							<Код>11</Код>
							<Наименование>ПочтовыйАдресОрганизации --&gt; ПочтовыйАдресОрганиза</Наименование>
							<Порядок>550</Порядок>
							<Источник>ПочтовыйАдресОрганизации</Источник>
							<Приемник>ПочтовыйАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>12</Код>
							<Наименование>ТелефонКонтактногоЛица --&gt; ТелефонРабочийКонтактны</Наименование>
							<Порядок>800</Порядок>
							<Источник>ТелефонКонтактногоЛица</Источник>
							<Приемник>ТелефонРабочийКонтактныеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>13</Код>
							<Наименование>ТелефонКорреспондента --&gt; ТелефонКонтрагента</Наименование>
							<Порядок>850</Порядок>
							<Источник>ТелефонКонтрагента</Источник>
							<Приемник>ТелефонКонтрагента</Приемник>
						</Значение>
						<Значение>
							<Код>14</Код>
							<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
							<Порядок>900</Порядок>
							<Источник>ТелефонОрганизации</Источник>
							<Приемник>ТелефонОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>15</Код>
							<Наименование>ТелефонПользователя --&gt; ТелефонПользователя</Наименование>
							<Порядок>950</Порядок>
							<Источник>ТелефонПользователя</Источник>
							<Приемник>ТелефонПользователя</Приемник>
						</Значение>
						<Значение>
							<Код>16</Код>
							<Наименование>ФаксКорреспондента --&gt; ФаксКонтрагенты</Наименование>
							<Порядок>1000</Порядок>
							<Источник>ФаксКонтрагента</Источник>
							<Приемник>ФаксКонтрагенты</Приемник>
						</Значение>
						<Значение>
							<Код>17</Код>
							<Наименование>ФаксОрганизации --&gt; ФаксОрганизации</Наименование>
							<Порядок>1050</Порядок>
							<Источник>ФаксОрганизации</Источник>
							<Приемник>ФаксОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>18</Код>
							<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
							<Порядок>1100</Порядок>
							<Источник>ФактАдресОрганизации</Источник>
							<Приемник>ФактАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>19</Код>
							<Наименование>ФактическийАдресКорреспондента --&gt; ФактАдресКонтра</Наименование>
							<Порядок>1150</Порядок>
							<Источник>ФактическийАдресКонтрагента</Источник>
							<Приемник>ФактАдресКонтрагента</Приемник>
						</Значение>
						<Значение>
							<Код>20</Код>
							<Наименование>ЮрАдресОрганизации --&gt; ЮрАдресОрганизации</Наименование>
							<Порядок>1200</Порядок>
							<Источник>ЮрАдресОрганизации</Источник>
							<Приемник>ЮрАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>21</Код>
							<Наименование>ЮридическийАдресКорреспондента --&gt; ЮрАдресКонтраге</Наименование>
							<Порядок>1250</Порядок>
							<Источник>ЮридическийАдресКонтрагента</Источник>
							<Приемник>ЮрАдресКонтрагента</Приемник>
						</Значение>
					</Значения>
				</Правило>
				<Правило>
					<Код>КлассификаторБанковРФ</Код>
					<Наименование>Справочник: Классификатор банков РФ</Наименование>
					<Порядок>150</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.КлассификаторБанковРФ</Источник>
					<Приемник>СправочникСсылка.Банки</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Адрес --&gt; Адрес</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Телефоны --&gt; Телефоны</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
							<КодПравилаКонвертации>КлассификаторБанковРФ                             </КодПравилаКонвертации>
						</Свойство>
						<Свойство Обязательное="true">
							<Код>9</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>СтатьиДвиженияДенежныхСредств</Код>
					<Наименование>Справочник: Статьи движения денежных средств</Наименование>
					<Порядок>200</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.СтатьиДвиженияДенежныхСредств</Источник>
					<Приемник>СправочникСсылка.СтатьиДвиженияДенежныхСредств</Приемник>
					<Свойства>
						<Свойство>
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
						</Свойство>
						<Свойство Обязательное="true">
							<Код>5</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Пользователи</Код>
					<Наименование>Справочник: Пользователи</Наименование>
					<Порядок>250</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.Пользователи</Источник>
					<Приемник>СправочникСсылка.Пользователи</Приемник>
					<Свойства>
						<Свойство>
							<Код>1</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>4</Код>
							<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>7</Код>
								<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Вид --&gt; Вид</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Город --&gt; Город</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Представление --&gt; Представление</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Регион --&gt; Регион</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>Страна --&gt; Страна</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>Тип --&gt; Тип</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Правило>
				<Код>БанковскиеСчета</Код>
				<Наименование>Справочник: Банковские счета</Наименование>
				<Порядок>100</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.БанковскиеСчета</Источник>
				<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
				<Свойства>
					<Свойство>
						<Код>14</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Банк --&gt; Банк</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
						<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>КлассификаторБанковРФ                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанковРФ"/>
						<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>КлассификаторБанковРФ                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВидСчета --&gt; ВидСчета</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДатаЗакрытия --&gt; ДатаЗакрытия</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДатаОткрытия --&gt; ДатаОткрытия</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>МесяцПрописью --&gt; МесяцПрописью</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>НомерИДатаРазрешения --&gt; НомерИДатаРазрешения</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаБезКопеек --&gt; СуммаБезКопеек</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ТекстКорреспондента --&gt; ТекстКорреспондента</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ТекстНазначения --&gt; ТекстНазначения</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Договоры</Код>
				<Наименование>Справочник: Внутренние документы</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Отказ = Не ЗначениеЗаполнено(Источник.РегистрационныйНомер)
	Или Не ЗначениеЗаполнено(Источник.ДатаРегистрации);</ПередВыгрузкой>
				<ПослеЗагрузки>// стандартный обработчик - основной счет, договор и т.п.
Объект.Заполнить(Неопределено);
// найдем структуру со значениями реквизитов и заполним наш объект
СтрокаВидаДокумента = Параметры.Договоры.Найти(ПараметрыОбъекта["ВидДокумента_Ключ"]);
Если СтрокаВидаДокумента &lt;&gt; Неопределено и ЗначениеЗаполнено(СтрокаВидаДокумента.ЗначенияРеквизитов) Тогда
	ЗначенияРеквизитов = ЗначениеИзСтрокиВнутр(СтрокаВидаДокумента.ЗначенияРеквизитов);
	Если ТипЗнч(ЗначенияРеквизитов) = Тип("Структура") Тогда
		РеквизитыОбъекта = Объект.Метаданные().Реквизиты;
		Для каждого КлючИЗначение из ЗначенияРеквизитов Цикл
			Если РеквизитыОбъекта.Найти(КлючИЗначение.Ключ) &lt;&gt; Неопределено Тогда
				Объект[КлючИЗначение.Ключ] = КлючИЗначение.Значение;
			КонецЕсли;
		КонецЦИкла;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ВнутренниеДокументы</Источник>
				<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Контрагент --&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаРегистрации --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>РегистрационныйНомер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="РегистрационныйНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Валюта --&gt; ВалютаВзаиморасчетов</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ДатаОкончанияДействия --&gt; СрокДействия</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ДатаОкончанияДействия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="СрокДействия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>--&gt; ВидДокумента_Ключ</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВидДокумента_Ключ</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = ЗначениеВСтрокуВнутр(Источник.ВидДокумента);</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЗаявкиНаОперации</Код>
				<Наименование>Справочник: Внутренние документы</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>Отказ = Не ЗначениеЗаполнено(Источник.РегистрационныйНомер)
	Или Не ЗначениеЗаполнено(Источник.ДатаРегистрации);
РежимЗаписи = "Проведение";
РежимПроведения = "Неоперативный";</ПередВыгрузкой>
				<ПриВыгрузке>Если ТипЗнч(ВходящиеДанные) &lt;&gt; Тип("Структура") Тогда
	ВходящиеДанные = Новый Структура;
КонецЕсли;
// Получим тип операции.
Позиция = Параметры.ВидыДокументовЗаявкаНаОперацию.Найти(Источник.ВидДокумента);
Если Позиция = Неопределено Тогда
	Отказ = Истина;
Иначе
	ТипОперации = Параметры.ТипыОперацияЗаявкаНаОперацию[Позиция];
	ВходящиеДанные.Вставить("ТипОперацииБюджетирование", ТипОперации);
	// Выберем расшифровку платежа по статьям ДДС.
	Запрос = Новый Запрос(
		"ВЫБРАТЬ
		|	СтатьяДвиженияДенежныхСредств КАК СтатьяДвиженияДенежныхСредств,
		|	Сумма КАК Сумма,
		|	СуммаНДС КАК СуммаНДС
		|ИЗ
		|	РегистрСведений.СтатьиДвиженияДенежныхСредствДокументов
		|ГДЕ
		|	Документ = &amp;Источник");
	Запрос.УстановитьПараметр("Источник", Источник.Ссылка);
	ДвиженияОперации = Запрос.Выполнить().Выгрузить();
	ВходящиеДанные.Вставить("ДвиженияОперации", ДвиженияОперации);
	ВходящиеДанные.Вставить("СуммаНДС", ДвиженияОперации.Итог("СуммаНДС"));
КонецЕсли;</ПриВыгрузке>
				<ПослеЗагрузки>// Определим счет контрагента и договор.
Если ЗначениеЗаполнено(Объект.Контрагент)
	И (Не ЗначениеЗаполнено(Объект.СчетКонтрагента) Или Объект.СчетКонтрагента.Владелец &lt;&gt; Объект.Контрагент)
	И ЗначениеЗаполнено(Объект.Контрагент.ОсновнойБанковскийСчет) Тогда
	Объект.СчетКонтрагента = Объект.Контрагент.ОсновнойБанковскийСчет;
КонецЕсли;
// Перенесем проект в табличную часть.
Для Каждого Строка Из Объект.ДвиженияОперации Цикл
	Строка.Проект = Объект.Проект;
КонецЦикла;
// Определим ставку НДС.
Если Объект.СуммаНДС = 0 Тогда
	Объект.СтавкаНДС = Перечисления.СтавкиНДС.БезНДС;
Иначе
	СуммаНДС18 = Объект.СуммаДокумента * 18 / 118;
	Разница18 = ?(Объект.СуммаНДС - СуммаНДС18 &gt; 0, Объект.СуммаНДС - СуммаНДС18, СуммаНДС18 - Объект.СуммаНДС);
	СуммаНДС10 = Объект.СуммаДокумента * 10 / 110;
	Разница10 = ?(Объект.СуммаНДС - СуммаНДС10 &gt; 0, Объект.СуммаНДС - СуммаНДС10, СуммаНДС10 - Объект.СуммаНДС);
	Если Разница10 &lt; Разница18 Тогда
		Объект.СтавкаНДС = Перечисления.СтавкиНДС.НДС10;
	Иначе
		Объект.СтавкаНДС = Перечисления.СтавкиНДС.НДС18;
	КонецЕсли;
КонецЕсли;
// Найдем структуру со значениями реквизитов и дозаполним наш объект.
СтрокаВидаДокумента = Параметры.ЗаявкиНаОперации.Найти(ПараметрыОбъекта["ВидДокумента_Ключ"]);
Если СтрокаВидаДокумента &lt;&gt; Неопределено и ЗначениеЗаполнено(СтрокаВидаДокумента.ЗначенияРеквизитов) Тогда
	ЗначенияРеквизитов = ЗначениеИзСтрокиВнутр(СтрокаВидаДокумента.ЗначенияРеквизитов);
	Если ТипЗнч(ЗначенияРеквизитов) = Тип("Структура") Тогда
		РеквизитыОбъекта = Объект.Метаданные().Реквизиты;
		Для каждого КлючИЗначение из ЗначенияРеквизитов Цикл
			Если РеквизитыОбъекта.Найти(КлючИЗначение.Ключ) &lt;&gt; Неопределено Тогда
				Объект[КлючИЗначение.Ключ] = КлючИЗначение.Значение;
			КонецЕсли;
		КонецЦИкла;
	КонецЕсли;
КонецЕсли;
// Заполним прочие реквизиты.
Если Не ЗначениеЗаполнено(Объект.Номер) Тогда
	Объект.УстановитьНовыйНомер();
КонецЕсли;
Объект.ВидБюджета = Перечисления.ПредназначенияЭлементовСтруктурыОтчета.БюджетДвиженияДенежныхСредств;
Объект.ПриходРасход = Перечисления.ВидыДвиженийПриходРасход.Расход;
Если Объект.ДвиженияОперации.Количество() &lt;&gt; 0
	И Не ЗначениеЗаполнено(Объект.СтатьяДвиженияДенежныхСредств) Тогда
	Объект.СтатьяДвиженияДенежныхСредств = Объект.ДвиженияОперации[0].СтатьяДвиженияДенежныхСредств;
КонецЕсли;
ЗаписьСостояния = РегистрыСведений.РегистрСостоянийОбъектов.СоздатьМенеджерЗаписи();
ЗаписьСостояния.Период = ПараметрыОбъекта["ДатаУстановкиСостояния"];
Если ЗначениеЗаполнено(Ссылка) Тогда
	ЗаписьСостояния.Объект = Ссылка;
Иначе
	ЗаписьСостояния.Объект = Объект.ПолучитьСсылкуНового();
КонецЕсли;
ЗаписьСостояния.СостояниеОбъекта = Перечисления.СостоянияСогласования.Утверждена;
ЗаписьСостояния.Записать();</ПослеЗагрузки>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>СправочникСсылка.ВнутренниеДокументы</Источник>
				<Приемник>ДокументСсылка.ЗаявкаНаОперацию</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаРегистрации --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>РегистрационныйНомер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="РегистрационныйНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>--&gt; ТипОперацииБюджетирование</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипОперацииБюджетирование" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОперацийБюджетирование"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>СрокИсполнения --&gt; ДатаНачала</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="СрокИсполнения" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаНачала" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыСКонтрагентами"
	И ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыПоКредитамИЗаймамСКонтрагентами"
	И ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыСПодотчетнымиЛицами"
	И ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыПоКредитамИЗаймамСРаботниками"	Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>--&gt; ДоговорКонтрагента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыСКонтрагентами"
	И ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыПоКредитамИЗаймамСКонтрагентами"
	И ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыСПодотчетнымиЛицами"
	И ВходящиеДанные.ТипОперацииБюджетирование &lt;&gt; "РасчетыПоКредитамИЗаймамСРаботниками" Тогда
	Отказ = Истина;
КонецЕсли;
Запрос = Новый Запрос(
	"ВЫБРАТЬ ПЕРВЫЕ 1
	|	СвязанныйДокумент КАК Договор
	|ИЗ
	|	РегистрСведений.СвязиДокументов
	|ГДЕ
	|	Документ = &amp;Источник
	|	И СвязанныйДокумент.ВидДокумента.ЯвляетсяДоговором");
Запрос.УстановитьПараметр("Источник", Источник.Ссылка);
Выборка = Запрос.Выполнить().Выбрать();
Если Выборка.Следующий() Тогда
	Значение = Выборка.Договор;
Иначе
	Отказ = Истина;
КонецЕсли;
</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Содержание --&gt; Комментарий</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Наименование --&gt; Комментарий</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Сумма --&gt; СуммаДокумента</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; ВидДокумента_Ключ</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ВидДокумента_Ключ</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = ЗначениеВСтрокуВнутр(Источник.ВидДокумента);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>--&gt; СуммаНДС</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>--&gt; ДвиженияОперации</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДвиженияОперации" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СтатьяДвиженияДенежныхСредств</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
							<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>18</Код>
						<Наименование>--&gt; ДатаУстановкиСостояния</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ДатаУстановкиСостояния</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>250</Порядок>
				<ПослеЗагрузки>Если ЗначениеЗаполнено(ПараметрыОбъекта["СтранаРегистрации"]) Тогда
	Запрос = Новый Запрос(
		"ВЫБРАТЬ ПЕРВЫЕ 1
		|	Ссылка
		|ИЗ
		|	Справочник.СтраныМира
		|ГДЕ
		|	НЕ ПометкаУдаления
		|	И Наименование ПОДОБНО &amp;СтранаРегистрации
		|");
	Запрос.УстановитьПараметр("СтранаРегистрации", ПараметрыОбъекта["СтранаРегистрации"]);
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		Объект.СтранаРегистрации = Выборка.Ссылка;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) Тогда
	Если НомерВариантаПоиска = 1 тогда
		СтрокаИменСвойствПоиска = "ИНН, КПП";
	ИначеЕсли НомерВариантаПоиска = 2 тогда
		СтрокаИменСвойствПоиска = "ИНН, Наименование";
	Иначе
		СтрокаИменСвойствПоиска = "Наименование";
	КонецЕсли;
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство>
						<Код>6</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮридическоеФизическоеЛицо</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮридическоеФизическоеЛицо"/>
						<КодПравилаКонвертации>ЮридическоеФизическоеЛицо                         </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>11</Код>
							<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Вид --&gt; Вид</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Представление --&gt; Представление</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Регион --&gt; Регион</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Страна --&gt; Страна</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Тип --&gt; Тип</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>23</Код>
						<Наименование>--&gt; СтранаРегистрации</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>СтранаРегистрации</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = "";
Для Каждого Строка из Источник.КонтактнаяИнформация Цикл
	Если Строка.Вид = Справочники.ВидыКонтактнойИнформации.ЮридическийАдресКонтрагента
		И ЗначениеЗаполнено(Строка.Страна) Тогда
		Значение = Строка.Страна;
		Прервать;
	КонецЕсли;
КонецЦикла;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>РегистрационныйНомер --&gt; РегистрационныйНомер</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="РегистрационныйНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="РегистрационныйНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КонтактныеЛица</Код>
				<Наименование>Справочник: Контактные лица</Наименование>
				<Порядок>300</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.КонтактныеЛица</Источник>
				<Приемник>СправочникСсылка.КонтактныеЛица</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>16</Код>
						<Наименование>Владелец --&gt; ОбъектВладелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="ОбъектВладелец" Вид="Реквизит"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Должность --&gt; Должность</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Должность" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Должность" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>4</Код>
						<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>15</Код>
							<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Вид --&gt; Вид</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Представление --&gt; Представление</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Регион --&gt; Регион</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Страна --&gt; Страна</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Тип --&gt; Тип</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>350</Порядок>
				<ПослеЗагрузки>Если ЗначениеЗаполнено(Объект.Наименование)
	И Не ЗначениеЗаполнено(Объект.НаименованиеСокращенное) Тогда
	Объект.НаименованиеСокращенное = Объект.Наименование;
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска["ИНН"]) Тогда
	Если НомерВариантаПоиска = 1 тогда
		СтрокаИменСвойствПоиска = "ИНН, КПП";
	ИначеЕсли НомерВариантаПоиска = 2 тогда
		СтрокаИменСвойствПоиска = "ИНН, Наименование";
	Иначе
		СтрокаИменСвойствПоиска = "Наименование";
	КонецЕсли;
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство>
						<Код>6</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Префикс --&gt; Префикс</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮридическоеФизическоеЛицо</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮридическоеФизическоеЛицо"/>
						<КодПравилаКонвертации>ЮридическоеФизическоеЛицо                         </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>10</Код>
							<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Вид --&gt; Вид</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Представление --&gt; Представление</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Регион --&gt; Регион</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Страна --&gt; Страна</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Тип --&gt; Тип</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Проекты</Код>
				<Наименование>Справочник: Проекты</Наименование>
				<Порядок>400</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Проекты</Источник>
				<Приемник>СправочникСсылка.Проекты</Приемник>
				<Свойства>
					<Свойство>
						<Код>4</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>9</ПриводитьКДлине>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Проекты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Проекты"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Состояние --&gt; Состояние</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Состояние" Вид="Реквизит" Тип="ПеречислениеСсылка.СостоянияПроектов"/>
						<Приемник Имя="Состояние" Вид="Реквизит" Тип="ПеречислениеСсылка.СостоянияПроектов"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПроектныеЗадачи</Код>
				<Наименование>Справочник: Проектные задачи</Наименование>
				<Порядок>450</Порядок>
				<ПриВыгрузке>Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	ТекущийПланНачало,
	|	ТекущийПланОкончание,
	|	НачалоФакт,
	|	ОкончаниеФакт
	|ИЗ РегистрСведений.СрокиПроектныхЗадач
	|ГДЕ ПроектнаяЗадача = &amp;ПроектнаяЗадача");
Запрос.УстановитьПараметр("ПроектнаяЗадача", Источник.Ссылка);
Выборка = Запрос.Выполнить().Выбрать();
ВходящиеДанные = Новый Структура;
Если Выборка.Следующий() Тогда
	ВходящиеДанные.Вставить("ДатаНачала", 
		?(ЗначениеЗаполнено(Выборка.НачалоФакт), Выборка.НачалоФакт, Выборка.ТекущийПланНачало));
	ВходящиеДанные.Вставить("ДатаОкончания", 
		?(ЗначениеЗаполнено(Выборка.ОкончаниеФакт), Выборка.ОкончаниеФакт, Выборка.ТекущийПланОкончание));
Иначе
	ВходящиеДанные.Вставить("ДатаНачала", Неопределено);
	ВходящиеДанные.Вставить("ДатаОкончания", Неопределено);
КонецЕсли;
</ПриВыгрузке>
				<ПослеЗагрузки>// Запишем дату начала и окончания в РС АтрибутыПроектов
Запись = РегистрыСведений.АтрибутыПроектов.СоздатьМенеджерЗаписи();
Если ЗначениеЗаполнено(Ссылка) Тогда
	Запись.Проект = Ссылка;
Иначе
	Запись.Проект = Объект.ПолучитьСсылкуНового();
КонецЕсли;
Запись.Сценарий = Справочники.Сценарии.План;
Запись.Прочитать();
Запись.ДатаНачала = ПараметрыОбъекта["ДатаНачала"];
Запись.ДатаОкончания = ПараметрыОбъекта["ДатаОкончания"];
Если ЗначениеЗаполнено(Запись.ДатаНачала)
	И ЗначениеЗаполнено(Запись.ДатаОкончания) Тогда
	Запись.ДлительностьДней = (Запись.ДатаОкончания - Запись.ДатаНачала) / 86400;
КонецЕсли;
Запись.Записать();</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ПроектныеЗадачи</Источник>
				<Приемник>СправочникСсылка.Проекты</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>9</ПриводитьКДлине>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Владелец --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Проекты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Проекты"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Родитель) Тогда
	Значение = Источник.Родитель;
	ИмяПКО = "ПроектныеЗадачи";
Иначе
	Значение = Источник.Владелец;
	ИмяПКО = "Проекты";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; ДатаНачала</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ДатаНачала</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; ДатаОкончания</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ДатаОкончания</ИмяПараметраДляПередачи>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>Предшественники --&gt; ПроектыПредшественники</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Предшественники" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ПроектыПредшественники" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>8</Код>
							<Наименование>Предшественник --&gt; Проект</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Предшественник" Вид="Реквизит" Тип="СправочникСсылка.ПроектныеЗадачи"/>
							<Приемник Имя="Проект" Вид="Реквизит" Тип="СправочникСсылка.Проекты"/>
							<КодПравилаКонвертации>ПроектныеЗадачи                                   </КодПравилаКонвертации>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>СпособыУстановкиКурсаВалюты</Код>
				<Наименование>Перечисление: Способы установки курса валюты</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.СпособыУстановкиКурсаВалюты</Источник>
				<Приемник>ПеречислениеСсылка.СпособыУстановкиКурсаВалюты</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ЗагрузкаИзИнтернета --&gt; ЗагрузкаИзИнтернета</Наименование>
						<Порядок>50</Порядок>
						<Источник>ЗагрузкаИзИнтернета</Источник>
						<Приемник>ЗагрузкаИзИнтернета</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НаценкаНаКурсДругойВалюты --&gt; НаценкаНаКурсДругойВ</Наименование>
						<Порядок>100</Порядок>
						<Источник>НаценкаНаКурсДругойВалюты</Источник>
						<Приемник>НаценкаНаКурсДругойВалюты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>РасчетПоФормуле --&gt; РасчетПоФормуле</Наименование>
						<Порядок>150</Порядок>
						<Источник>РасчетПоФормуле</Источник>
						<Приемник>РасчетПоФормуле</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>РучнойВвод --&gt; РучнойВвод</Наименование>
						<Порядок>200</Порядок>
						<Источник>РучнойВвод</Источник>
						<Приемник>РучнойВвод</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>Перечисление: Типы контактной информации</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Факс --&gt; Факс</Наименование>
						<Порядок>300</Порядок>
						<Источник>Факс</Источник>
						<Приемник>Факс</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Skype --&gt; Другое</Наименование>
						<Порядок>350</Порядок>
						<Источник>Skype</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮридическоеФизическоеЛицо</Код>
				<Наименование>Перечисление: Юр физ лицо</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮридическоеФизическоеЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ИндивидуальныйПредприниматель --&gt; ФизическоеЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ИндивидуальныйПредприниматель</Источник>
						<Приемник>ФизическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ФизЛицо --&gt; ФизическоеЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ЮрЛицо --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЮрЛицоНеРезидент --&gt; ЮридическоеЛицо</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЮрЛицоНеРезидент</Источник>
						<Приемник>ЮридическоеЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Регистры сведений</Код>
			<Наименование>Регистры сведений</Наименование>
			<Порядок>150</Порядок>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>Валюты</Код>
				<Наименование>Валюты</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Валюты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторБанковРФ</Код>
				<Наименование>Классификатор банков РФ</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>КлассификаторБанковРФ                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторБанковРФ</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СтатьиДвиженияДенежныхСредств</Код>
				<Наименование>Статьи движения денежных средств</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>СтатьиДвиженияДенежныхСредств                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СтатьиДвиженияДенежныхСредств</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Пользователи</Код>
				<Наименование>Пользователи</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Пользователи</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Параметры.ОграничиватьВыгрузкуОрганизациями 
	и Параметры.Организации.Найти(Объект) = Неопределено Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе // отбор по наличию документов
	Контрагент = Объект.Ссылка;
	КонтрагентПодлежитВыгрузке = Ложь;
	Выполнить(Алгоритмы.КонтрагентПодлежитВыгрузке);
	Отказ = НЕ КонтрагентПодлежитВыгрузке; 
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>БанковскиеСчета</Код>
				<Наименование>БанковскиеСчета</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.БанковскиеСчета</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>// корреспондент - отбор по наличию документов
Если ТипЗнч(Объект.Владелец) = Тип("СправочникСсылка.Контрагенты") Тогда
	Контрагент = Объект.Владелец;
	КонтрагентПодлежитВыгрузке = Ложь;
	Выполнить(Алгоритмы.КонтрагентПодлежитВыгрузке);
	Отказ = НЕ КонтрагентПодлежитВыгрузке; 
// организация - отбор по списку
ИначеЕсли ТипЗнч(Объект.Владелец) = Тип("СправочникСсылка.Организации") Тогда
	Если Параметры.ОграничиватьВыгрузкуОрганизациями 
		и Параметры.Организации.Найти(Объект.Владелец) = Неопределено Тогда
		Отказ = Истина;
	КонецЕсли;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>КонтактныеЛица</Код>
				<Наименование>КонтактныеЛица</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>КонтактныеЛица                                    </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КонтактныеЛица</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>// отбор по наличию документов
Контрагент = Объект.Владелец;
КонтрагентПодлежитВыгрузке = Ложь;
Выполнить(Алгоритмы.КонтрагентПодлежитВыгрузке);
Отказ = НЕ КонтрагентПодлежитВыгрузке;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>Проекты</Код>
				<Наименование>Проекты</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>Проекты                                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Проекты</ОбъектВыборки>
				<ПередОбработкойПравила>Отказ = Не Параметры.ВыгружатьПроектыИПроектныеЗадачи;
</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ПроектныеЗадачи</Код>
				<Наименование>Проектные задачи</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>ПроектныеЗадачи                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ПроектныеЗадачи</ОбъектВыборки>
				<ПередОбработкойПравила>Отказ = Не Параметры.ВыгружатьПроектыИПроектныеЗадачи;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ВнутренниеДокументы</Код>
				<Наименование>Внутренние документы</Наименование>
				<Порядок>550</Порядок>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВнутренниеДокументы</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Параметры.ОграничиватьВыгрузкуОрганизациями 
	и Параметры.Организации.Найти(Объект.Организация) = Неопределено Тогда
	Отказ = Истина;
Иначе // последняя проверка: выгружаемый документ должен быть согласован
	ЗапросСогласован = Новый Запрос(
		"ВЫБРАТЬ ПЕРВЫЕ 1
		|	Состояние,
		|	ДатаУстановки
		|ИЗ
		|	РегистрСведений.ТекущиеСостоянияДокументов
		|ГДЕ
		|	Документ = &amp;Документ
		|	И Состояние = &amp;Состояние");
	ЗапросСогласован.УстановитьПараметр("Документ", Объект.Ссылка);
	ЗапросСогласован.УстановитьПараметр("Состояние", Перечисления.СостоянияДокументов.Согласован);
	// какое правило применять?
	Если Параметры.ВидыДокументовДоговор.Найти(Объект.ВидДокумента) &lt;&gt; Неопределено Тогда
		Если ЗапросСогласован.Выполнить().Пустой() Тогда
			Отказ = Истина;
		Иначе
			Если Не ЗначениеЗаполнено(Объект.Контрагент) Тогда
				Отказ = Истина;
			Иначе
				ИмяПКО = "Договоры";
			КонецЕсли;
		КонецЕсли;
	ИначеЕсли Параметры.ВидыДокументовЗаявкаНаОперацию.Найти(Объект.ВидДокумента) &lt;&gt; Неопределено Тогда
		Выборка = ЗапросСогласован.Выполнить().Выбрать();
		Если Выборка.Следующий() Тогда
			ИмяПКО = "ЗаявкиНаОперации";
			ВходящиеДанные = Новый Структура;
			ВходящиеДанные.Вставить("ДатаУстановкиСостояния", Выборка.ДатаУстановки);
		Иначе
			Отказ = Истина;
		КонецЕсли;
	Иначе
		Отказ = Истина;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="КонтрагентПодлежитВыгрузке" ИспользуетсяПриЗагрузке="false">
			<Текст>Если Параметры.ОграничиватьВыгрузкуОрганизациями Тогда
	// хотя бы один документ выбранных организаций выбранного вида
	Запрос = Новый Запрос(
		"ВЫБРАТЬ РАЗРЕШЕННЫЕ ПЕРВЫЕ 1 1
		|ИЗ Справочник.ВнутренниеДокументы
		|ГДЕ 
		|	Контрагент = &amp;Контрагент
		|	И ВидДокумента В (&amp;ВидыДокументовДоговор, &amp;ВидыДокументовЗаявкаНаОперацию)
		|   И Организация В (&amp;Организации)
		|");
	Запрос.УстановитьПараметр("Контрагент", Контрагент);
	Запрос.УстановитьПараметр("ВидыДокументовДоговор", Параметры.ВидыДокументовДоговор);
	Запрос.УстановитьПараметр("ВидыДокументовЗаявкаНаОперацию", Параметры.ВидыДокументовЗаявкаНаОперацию);
	Запрос.УстановитьПараметр("Организации", Параметры.Организации);
	КонтрагентПодлежитВыгрузке = НЕ Запрос.Выполнить().Пустой();
Иначе // без отбора по организациям
	КонтрагентПодлежитВыгрузке = Истина;
КонецЕсли;</Текст>
			<Параметры>Контрагент, КонтрагентПодлежитВыгрузке</Параметры>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>